{"version":3,"sources":["ui/calendar/calendar-api.ts","ui/calendar/month.tsx","ui/calendar/calendar.tsx","features/goal-calendar/calendar-day.ts","common/effector-persist.ts","features/goal-calendar/goals.store.ts","features/goal-calendar/goal-calendar.tsx","ui/theme-toggle.tsx","ui/modal.tsx","ui/theme.ts","features/header/theme.store.ts","features/header/zoom.store.ts","features/header/header.tsx","app.tsx","common/service-worker.ts","index.tsx"],"names":["getCacheKey","year","month","cache","getIterableMonth","memo","undefined","daysCount","getDaysInMonth","day","days","range","firstDayOfWeek","getDayInWeek","lastDayOfWeek","length","n","fill","t","s","res","chunk","getWeekdays","map","index","moment","format","first","weekdays","dayOfTheWeek","Date","getDay","getDate","getMonthNameByIndex","getCurrentDate","now","getFullYear","getMonth","getWeeksCountInMonth","getCurrentYear","equals","second","MonthContainer","styled","Week","Month","props","WeekDayComponent","MonthHeaderComponent","DayComponent","useState","weeks","setWeeks","useEffect","date","title","key","week","weekIndex","dayIndex","CalendarContainer","DayComponentDefault","MonthHeaderComponentDefault","Calendar","css","String","raw","CalendarDay","p","isEmpty","complete","isCurrentDay","defaultConfig","withPersist","store","config","persistKey","snapshot","localStorage","getItem","rehydrate","createEvent","on","JSON","parse","watch","state","setItem","stringify","GoalsDomain","createDomain","setGoalsPerWeek","event","addGoal","removeGoal","$goals","payload","filter","item","CalendarApi","$absoluteGoalsPerWeek","Container","MonthTitle","YearTitle","WeekDayContainer","MonthHeaderContainer","GoalsPerMonth","Delimiter","goals","useStore","find","onClick","calcGoalsPerWeek","Math","floor","calcAllGoalsPerMonth","goalsPerWeek","last","all","slice","MonthHeader","absoluteGoalsPerWeek","monthDaysCount","goalsPerMonthCount","goalsCountVisible","GoalCalendar","allGoalsCount","absoluteGoalsCount","reduce","acc","percentCompleteGoals","ToggleContainer","dark","light","IconSVG","x","y","opacity","CloudSVG","BatSVG","zIndex","Circle","active","background","states","gradient","lighter","darker","circle","icons","size","position","disable","ThemeToggle","onChange","value","id","darkIcons","lightIcons","htmlFor","checked","type","e","target","hidden","Cloud","height","width","viewBox","xmlns","d","Bat","Color","Theme","ModalContainer","themes","text","accent","secondary","accentText","setTheme","theme","html","document","getElementsByTagName","Object","keys","forEach","color","style","setProperty","ThemeDomain","onInitTheme","initTheme","effect","use","transitionDuration","initT","params","setT","$theme","sample","clock","source","ZoomDomain","initZoom","setZoom","fontSize","$zoom","done","result","HeaderWrapper","HeaderContainer","ZoomContainer","ZoomSVG","GoalsCountSelect","Header","zoom","min","max","ZoomPlusIcon","AppContainer","Footer","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c850c81c.chunk.js","sourcesContent":["import {chunk, range} from \"lodash\";\nimport moment from \"moment\";\n\nexport type IterableMonth = number[][];\nexport interface CalendarDate {\n    year: number;\n    month: number;\n    day: number;\n}\n\nexport function getCurrentDate(): CalendarDate {\n    const now = new Date();\n\n    return {\n        year: now.getFullYear(),\n        month: now.getMonth(),\n        day: now.getDate(),\n    }\n}\n\nconst getCacheKey = (year: number, month: number) => year + ' ' + month;\nconst cache: {[key: string]: IterableMonth} = {};\nexport function getIterableMonth(year: number, month: number): IterableMonth {\n    const memo = cache[getCacheKey(year, month)];\n    if (memo !== undefined) {\n        return memo\n    }\n\n    const daysCount = getDaysInMonth({year, month, day: 0});\n    const days = range(1, daysCount + 1);\n    const firstDayOfWeek = getDayInWeek(year, month, days[0]);\n    const lastDayOfWeek = getDayInWeek(year, month, days[days.length - 1]);\n\n    const n = range(0, firstDayOfWeek).fill(0);\n    const t = [...n, ...days];\n    const s = [...t, ...range(6 - lastDayOfWeek).fill(0)];\n    const res = chunk(s, 7);\n\n    cache[getCacheKey(year, month)] = res;\n\n    return res;\n}\n\nexport function getWeekdays() {\n    const [first, ...weekdays] = range(7).map(index => moment(index, 'e').format('dd'));\n    return [...weekdays, first];\n}\n\nexport function getDayInWeek(year: number, month: number, day: number): number {\n    const dayOfTheWeek = new Date(year, month, day).getDay();\n\n    return dayOfTheWeek === 0 ? 6 : dayOfTheWeek - 1;\n}\n\nexport function getDaysInMonth({year, month}: CalendarDate): number {\n    return new Date(year, month + 1, 0).getDate();\n}\n\nexport function getMonthNameByIndex(index: number) {\n    return moment(new Date(2000, index + 1, 0)).format('MMMM');\n}\n\nexport function getWeeksCountInMonth(year: number, month: number): number {\n    const daysCount = getDaysInMonth({year, month, day: 0});\n    const firstDay = getDayInWeek(year, month, 1);\n    const lastDay = getDayInWeek(year, month, daysCount);\n\n    return (daysCount - (7 - firstDay) - (lastDay + 1)) / 7 + 2;\n}\n\nexport function getCurrentYear(): number {\n    return new Date().getFullYear();\n}\n\nexport function equals(first: CalendarDate, second: CalendarDate) {\n    return first.year === second.year &&\n        first.month === second.month &&\n        first.day === second.day;\n}\n\nexport default {\n    getCurrentDate,\n    getIterableMonth,\n    getDaysInMonth,\n    getDayInWeek,\n    getMonthNameByIndex,\n    getWeeksCountInMonth,\n    getCurrentYear,\n    equals,\n    getWeekdays,\n};\n","import React, {useEffect, useState} from \"react\";\nimport styled from 'styled-components';\nimport {CalendarDate, IterableMonth, getIterableMonth, getWeekdays} from './calendar-api';\n\nconst MonthContainer = styled('div')`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Week = styled('div')`\n  display: flex;\n`;\n\nexport interface DayComponentProps {\n    date: CalendarDate;\n    index: number;\n}\n\nexport interface MonthHeaderComponentProps {\n    date: CalendarDate;\n    index: number;\n}\n\nexport interface WeekDayComponentProps {\n    title: string;\n    date: CalendarDate;\n    index: number;\n}\n\ninterface MonthProps {\n    year: number;\n    month: number;\n    WeekDayComponent?: React.FC<WeekDayComponentProps>,\n    DayComponent: React.FC<DayComponentProps>;\n    MonthHeaderComponent: React.FC<MonthHeaderComponentProps>,\n}\n\nexport const Month: React.FC<MonthProps> = (props) => {\n    const {year, month,\n        WeekDayComponent,\n        MonthHeaderComponent,\n        DayComponent,\n    } = props;\n    const [weeks, setWeeks] = useState<IterableMonth>([]);\n\n    useEffect(() => {\n        setWeeks(getIterableMonth(year, month));\n    }, []);\n\n    return (\n        <MonthContainer>\n            <MonthHeaderComponent index={month} date={{year, month, day: 0}}/>\n            {WeekDayComponent && <Week>\n                {getWeekdays().map((title, index) => (\n                    <WeekDayComponent date={{year, month: index, day: 0}} key={index} title={title} index={index}/>\n                ))}\n            </Week>}\n            {weeks.map((week: number[], weekIndex: number) => (\n                <Week key={weekIndex}>\n                    {week.map((day, dayIndex) => (\n                        <DayComponent\n                            index={dayIndex}\n                            date={{year, month, day}}\n                            key={dayIndex}\n                        />\n                    ))}\n                </Week>\n            ))}\n        </MonthContainer>\n    )\n};\n","import React from 'react';\nimport range from 'lodash/range';\nimport styled from 'styled-components';\n\nimport {Month, DayComponentProps, MonthHeaderComponentProps, WeekDayComponentProps} from './month';\nimport {getMonthNameByIndex} from \"./calendar-api\";\n\nconst CalendarContainer = styled('div')`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n`;\n\nconst MonthContainer = styled('div')`\n  padding: 15px;\n`;\n\ninterface CalendarProps {\n    year: number;\n    WeekDayComponent?: React.FC<WeekDayComponentProps>\n    MonthHeaderComponent?: React.FC<MonthHeaderComponentProps>,\n    DayComponent?: React.FC<DayComponentProps>\n}\n\nconst DayComponentDefault: React.FC<DayComponentProps> = ({date}) => {\n    return (\n        date.day === 0 ? <div/> : <div>{date.day}</div>\n    )\n};\n\nconst MonthHeaderComponentDefault: React.FC<MonthHeaderComponentProps> = (props) => {\n    return (\n        <h2>{getMonthNameByIndex(props.date.month)}</h2>\n    )\n};\n\nexport const Calendar: React.FC<CalendarProps> = (props) => {\n    const {\n        year,\n        WeekDayComponent,\n        MonthHeaderComponent = MonthHeaderComponentDefault,\n        DayComponent = DayComponentDefault,\n    } = props;\n\n    return (\n        <CalendarContainer>\n            {range(0, 12).map(month => (\n                <MonthContainer key={month}>\n                    <Month\n                        WeekDayComponent={WeekDayComponent}\n                        MonthHeaderComponent={MonthHeaderComponent}\n                        DayComponent={DayComponent}\n                        year={year}\n                        month={month}\n                    />\n                </MonthContainer>\n            ))}\n        </CalendarContainer>\n    )\n};\n","import styled from \"styled-components\";\n\nconst css = String.raw;\n\nexport const CalendarDay = styled('div')<{isCurrentDay?: boolean, complete?: boolean, isEmpty?: boolean}>`\n  --day-with: 1.3rem;\n  \n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  width: var(--day-with);\n  height: calc(var(--day-with) + .3rem);\n  padding: 0;\n  font-size: 0.7rem;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  margin: 3px 0;\n  transition: color .7s ease-in-out;\n  z-index: 1;\n  \n  ${p => p.isEmpty !== true && css`\n    &:after {\n      content: \"\";\n      display: block;\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 1px;\n      background-color: var(--secondary);\n      transition: background-color .7s ease-in-out;\n      z-index: -2;\n    }\n  `}\n  \n  ${p => p.complete && css`\n    &:before {\n      content: \"\";\n      display: block;\n      position: absolute;\n      top: .22rem;\n      width: calc(var(--day-with) - .2rem);\n      height: calc(var(--day-with) - .2rem);\n      border: 1px solid var(--accent);\n      border-radius: 50%;\n      z-index: -2;\n      transition: border .7s ease-in-out;\n    }\n  `}\n  \n  ${p => p.isCurrentDay === true && css`\n    color: var(--accentText);\n\n    &:before {\n      content: \"\";\n      display: block;\n      position: absolute;\n      top: .28rem;\n      left: .13rem;\n      width: calc(var(--day-with) - .2rem);\n      height: calc(var(--day-with) - .2rem);\n      background-color: var(--accent);\n      border-radius: 50%;\n      z-index: -2;\n      transition: background-color .7s ease-in-out;\n    }\n  `}\n`;\n","import { createEvent, Store } from \"effector\";\n\ntype PersistConfig = {\n    key?: string;\n    // onInit: ()\n}\n\nconst defaultConfig = {\n    key: 'persist'\n};\n\nexport const withPersist = <State>(store: Store<State>, config: PersistConfig = defaultConfig) => {\n    const persistKey = config.key!;\n    const snapshot = localStorage.getItem(persistKey);\n    const rehydrate = createEvent();\n\n    if (snapshot) {\n        store.on(rehydrate, () => JSON.parse(snapshot));\n        rehydrate();\n    }\n\n    store.watch(state => {\n        localStorage.setItem(persistKey, JSON.stringify(state));\n    });\n\n    return store;\n};\n","import {createDomain} from 'effector';\nimport {withPersist} from 'src/common/effector-persist';\n\nimport {CalendarDate} from 'src/ui/calendar/calendar-api';\nimport {CalendarApi} from \"src/ui/calendar\";\n\nexport const GoalsDomain = createDomain();\n\nexport interface Goal {\n    date: CalendarDate;\n}\n\nexport const setGoalsPerWeek = GoalsDomain.event<number>();\nexport const addGoal = GoalsDomain.event<CalendarDate>();\nexport const removeGoal = GoalsDomain.event<CalendarDate>();\n\nexport const $goals = withPersist(GoalsDomain.store<Goal[]>([]), {key: 'goals'})\n    .on(addGoal, (state, payload) => (\n        [...state, {date: payload}])\n    )\n    .on(removeGoal, (state, payload) => state.filter(item => !CalendarApi.equals(item.date, payload)));\n\nexport const $absoluteGoalsPerWeek = withPersist(GoalsDomain.store<number>(4), {key: 'goals-per-week'})\n    .on(setGoalsPerWeek, (state, payload) => payload);\n","import React from 'react';\nimport styled from 'styled-components';\nimport {useStore} from 'effector-react';\nimport {range} from 'lodash';\nimport {Calendar, CalendarApi} from 'src/ui/calendar';\nimport {IterableMonth} from 'src/ui/calendar/calendar-api';\nimport {DayComponentProps, MonthHeaderComponentProps, WeekDayComponentProps} from 'src/ui/calendar/month';\nimport {CalendarDay} from './calendar-day';\nimport {$goals, $absoluteGoalsPerWeek, addGoal, removeGoal} from 'src/features/goal-calendar/goals.store';\n\nconst Container = styled('div')`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: var(--max-container-width);\n  margin: 0 auto;\n`;\n\nconst MonthTitle = styled('h2')`\n  font-size: 1.3rem;\n  font-family: Merriweather, sans-serif;\n  color: var(--accent);\n  margin: 10px 0;\n`;\n\nconst YearTitle = styled('h1')`\n  margin-top: 10px;\n  margin-bottom: 3px;\n  font-size: 3rem;\n  color: var(--accent);\n  font-family: Merriweather, sans-serif;\n`;\n\nconst WeekDayContainer = styled('div')`\n  text-align: center;\n  font-size: .6rem;\n  font-weight: bold;\n  width: 1.3rem;\n  color: var(--text);\n  transition: color .7s ease-in-out;\n`;\n\nconst MonthHeaderContainer = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst GoalsPerMonth = styled('div')`\n  font-size: .8rem;\n  transition: color .7s ease-in-out;\n  text-align: center;\n`;\n\nconst Delimiter = styled('span')`\n  color: var(--accent)\n`;\n\nconst DayComponent: React.FC<DayComponentProps> = ({date}) => {\n    const goals = useStore($goals);\n    if (date.day === 0) {\n        return <CalendarDay isEmpty={true}/>\n    }\n    const now = new Date();\n    const isCurrentDay = now.getDate() === date.day && now.getMonth() === date.month;\n    const complete = goals.find(item => CalendarApi.equals(item.date, date)) !== undefined;\n    const handlePress = () => {\n        if (date.day > now.getDate() || date.month > now.getMonth()) {\n            return;\n        }\n\n        complete ? removeGoal(date) : addGoal(date);\n    };\n\n    return (\n        <CalendarDay\n            isCurrentDay={isCurrentDay}\n            complete={complete}\n            onClick={handlePress}\n        >\n            {date.day}\n        </CalendarDay>\n    );\n};\n\nconst WeekDayComponent: React.FC<WeekDayComponentProps> = ({title}) => {\n    return (\n        <WeekDayContainer>{title}</WeekDayContainer>\n    )\n};\n\nconst calcGoalsPerWeek = (goals: number, week: number[]) => Math.floor(week.filter(item => item !== 0).length / 7 * (goals - 1));\nfunction calcAllGoalsPerMonth(goalsPerWeek: number, month: IterableMonth) {\n    const [first, ..._] = month;\n    const last = month[month.length - 1];\n    const middle = month.slice(0, month.length - 1);\n\n    const all = middle.length * goalsPerWeek + calcGoalsPerWeek(goalsPerWeek, first) + calcGoalsPerWeek(goalsPerWeek, last);\n\n    if (goalsPerWeek === 4) {\n        return all - 2;\n    }\n\n    if (goalsPerWeek === 3) {\n        return all - 1;\n    }\n\n    return all;\n}\n\nconst MonthHeader: React.FC<MonthHeaderComponentProps> = ({date}) => {\n    const absoluteGoalsPerWeek = useStore($absoluteGoalsPerWeek);\n    const goals = useStore($goals);\n    const title = CalendarApi.getMonthNameByIndex(date.month);\n    const monthDaysCount = calcAllGoalsPerMonth(absoluteGoalsPerWeek, CalendarApi.getIterableMonth(date.year, date.month));\n    const goalsPerMonthCount = goals\n        .filter(item => item.date.month === date.month)\n        .length;\n    const goalsCountVisible = date.month <= CalendarApi.getCurrentDate().month;\n\n    return (\n        <MonthHeaderContainer>\n            <MonthTitle>{title}</MonthTitle>\n            {goalsCountVisible && <GoalsPerMonth>{goalsPerMonthCount}/{monthDaysCount}</GoalsPerMonth>}\n        </MonthHeaderContainer>\n    )\n};\n\nexport const GoalCalendar: React.FC = () => {\n    const year = CalendarApi.getCurrentYear();\n    const absoluteGoalsPerWeek = useStore($absoluteGoalsPerWeek);\n    const allGoalsCount = useStore($goals).length;\n    const absoluteGoalsCount = range(0, 12)\n        .map(index => CalendarApi.getIterableMonth(year, index))\n        .map(month => calcAllGoalsPerMonth(absoluteGoalsPerWeek, month))\n        .reduce((acc, item) => acc + item, 0);\n    const percentCompleteGoals = Math.floor(allGoalsCount / absoluteGoalsCount * 100);\n\n    return (\n        <Container>\n            <div>\n                <YearTitle>{year}</YearTitle>\n                <GoalsPerMonth>{allGoalsCount}/{absoluteGoalsCount}<Delimiter>|</Delimiter>{percentCompleteGoals}%</GoalsPerMonth>\n            </div>\n            <Calendar\n                year={year}\n                WeekDayComponent={WeekDayComponent}\n                DayComponent={DayComponent}\n                MonthHeaderComponent={MonthHeader}\n            />\n        </Container>\n    )\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst TOGGLE_HEIGHT = 36;\nconst TOGGLE_WIDTH = TOGGLE_HEIGHT * 2.01;\n\nconst LIGHT_DARKER_COLOR = '#7abae4';\nconst LIGHT_LIGHTER_COLOR = '#90d0fe';\n\nconst DARK_DARKER_COLOR = '#2b00bc';\nconst DARK_LIGHTER_COLOR = '#4a23ca';\n\nconst CIRCLE_LIGHT_COLOR = '#ffea4f';\nconst CIRCLE_DARK_COLOR = '#ebecec';\n\n\nconst ToggleContainer = styled('label')<{ light: string, dark: string }>`\n  display: block;\n  width: ${TOGGLE_WIDTH}px;\n  height: ${TOGGLE_HEIGHT}px;\n  position: relative;\n  background: linear-gradient(148deg, ${p => p.dark} 0%, ${p => p.light} 100%);\n  border-radius: ${TOGGLE_HEIGHT}px;\n  cursor: pointer;\n  transition: all .7s ease-in-out;\n`;\n\nconst IconSVG = styled('svg')<{ x: string, y: string , opacity: number}>`\n  position: absolute;\n  top: 0;\n  transform: translate(${p => p.x}, ${p => p.y});\n  z-index: 100;\n  opacity: ${p => p.opacity};\n  transition: all .7s ease-in-out;\n`;\n\nconst CloudSVG = styled(IconSVG)`\n  left: 0;\n`;\n\nconst BatSVG = styled(IconSVG)<{zIndex: number}>`\n  right: 0;\n  z-index: ${p => p.zIndex};\n`;\n\nconst Circle = styled('div')<{ background: string, active: boolean }>`\n  width: ${TOGGLE_HEIGHT}px;\n  height: ${TOGGLE_HEIGHT}px;\n  position: relative;\n  transform: translateX(${p => p.active ? '0' : '100%'});\n  z-index: 2;\n  transition: all .7s ease-in-out;\n  \n  &:before {\n    content: \"\";\n    display: block;\n    position:absolute;\n    background-color: ${p => p.background};\n    width: 79%;\n    height: 79%;\n    transform: translate(14.35%, 15%);\n    border-radius: 50%;\n    box-shadow: 0 0 16px 0px ${p => p.background};\n    transition: all .7s ease-in-out;\n  }\n`;\n\nconst states = {\n    active: {\n        gradient: {\n            lighter: LIGHT_LIGHTER_COLOR,\n            darker: LIGHT_DARKER_COLOR,\n        },\n        circle: CIRCLE_LIGHT_COLOR,\n        icons: {\n            dark: [\n                {size: 20, zIndex: 3, position: {x: '-0%', y: '40%'}},\n                {size: 17, zIndex: 1, position: {x: '135%', y: '0%'}},\n            ],\n            light: [\n                {size: 10, position: {x: '357%', y: '70%'}},\n                {size: 20, position: {x: '100%', y: '70%'}},\n            ]\n        }\n    },\n    disable: {\n        gradient: {\n            lighter: DARK_LIGHTER_COLOR,\n            darker: DARK_DARKER_COLOR,\n        },\n        circle: CIRCLE_DARK_COLOR,\n        icons: {\n            dark: [\n                {size: 20, zIndex: 3, position: {x: '-100%', y: '70%'}},\n                {size: 17, zIndex: 1, position: {x: '35%', y: '20%'}},\n            ],\n            light: [\n                {size: 10, position: {x: '257%', y: '100%'}},\n                {size: 20, position: {x: '0%', y: '90%'}},\n            ]\n        }\n    }\n};\n\ninterface ThemeToggleProps {\n    onChange: (value: boolean) => void;\n    value: boolean;\n    id: string;\n}\n\nexport const ThemeToggle: React.FC<ThemeToggleProps> = ({onChange, value, id}) => {\n    const state = value ? states.active : states.disable;\n    const darkIcons = state.icons.dark;\n    const lightIcons = state.icons.light;\n\n    return (\n        <ToggleContainer htmlFor={id} light={state.gradient.lighter} dark={state.gradient.darker}>\n            <input\n                id={id}\n                checked={value}\n                type=\"checkbox\"\n                onChange={e => onChange(e.target.checked)}\n                hidden={true}\n            />\n            <Circle background={state.circle} active={value}/>\n            {darkIcons.map((item, index) => (\n                <Bat key={index} {...item} opacity={value ? 0 : 1}/>\n            ))}\n            {lightIcons.map((item, index) => (\n                <Cloud key={index} {...item} opacity={value ? 1 : 0}/>\n            ))}\n        </ToggleContainer>\n    )\n};\n\ninterface IconProps {\n    size: number,\n    opacity: number,\n    position: { x: string, y: string },\n}\n\nconst Cloud: React.FC<IconProps> = ({size, position, opacity}) => (\n    <CloudSVG\n        {...position}\n        opacity={opacity}\n        height={size}\n        width={size}\n        viewBox=\"0 -91 512 512\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path fill=\"#fff\"\n              d=\"M415.7 138.24C413.9 61.59 351.22 0 274.14 0 203.3 0 144.6 52.04 134.2 119.98 66.26 102.21 0 153.52 0 223.52c0 59.1 47.91 107.02 107.02 107.02h317.05v-.38C473.32 326 512 284.72 512 234.4a96.14 96.14 0 00-96.3-96.15zm0 0\"/>\n    </CloudSVG>\n);\n\nconst Bat: React.FC<{zIndex?: number} & IconProps> = ({size, position, zIndex= 1, opacity}) => (\n    <BatSVG\n        {...position}\n        opacity={opacity}\n        width={size}\n        height={size}\n        zIndex={zIndex}\n        viewBox='0 0 187.059 187.059'\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path\n            d=\"M100 68c-4-3-9-2-13 0-2-2-6-10-6-13 0 2-3 8-2 15-19 0-36-12-36-20-5 0-30 9-43 27 24-1 35 11 41 29 38-13 52 28 52 31 0-2 15-44 52-31 7-12 17-33 42-28-5-9-26-27-41-28-2 4-12 20-37 20l-3-15c-1 3-3 10-6 13z\"/>\n    </BatSVG>\n);\n","import React, {useEffect, useRef, useState} from 'react';\nimport styled from 'styled-components';\nimport ReactDOM from 'react-dom';\n\nconst ModalWrapper = styled('div')`\n  position: fixed;\n  width: 100vw;\n  height: 100vh;\n  left: 0;\n  top: 0;\n  z-index: 100000;\n`;\n\nconst Overlay = styled('div')`\n  width: 100%;\n  height: 100%;\n  background: var(--background);\n  opacity: .7;\n`;\n\nconst Content = styled('div')`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n  max-height: 400px;\n  padding: 20px;\n  transform: translate(-50%, -50%);\n  overflow-y: scroll;\n  background: var(--background);\n`;\n\ninterface ModalProps {\n    isOpen: boolean;\n}\n\nexport const ModalContainer = () => {\n    return (\n        <div id=\"modal-container\"/>\n    )\n};\n\nexport const Modal: React.FC<ModalProps> = () => {\n    const [_, setReady] = useState(false);\n    const container = useRef<Element>(null);\n    const modal = useRef(null);\n\n    useEffect(() => {\n        const el = document.getElementById('modal-container');\n\n        if (!el) {\n            console.warn('You need add ModalContainer in your app');\n            return;\n        }\n\n        (container as any).current = el;\n        setReady(true);\n\n        return () => {\n            container.current!.removeChild(modal.current!)\n        }\n    }, []);\n\n    if (container.current === null) {\n        return <></>;\n    }\n\n    return ReactDOM.createPortal(\n        <ModalWrapper ref={modal}>\n            <Overlay/>\n            <Content>\n                modal\n            </Content>\n        </ModalWrapper>,\n        container.current!,\n    )\n};\n","export enum Color {\n    background = 'background',\n    text = 'text',\n    accent = 'accent',\n    secondary = 'secondary',\n    accentText = 'accentText',\n}\n\nexport enum Theme {\n    light = 'light',\n    dark = 'dark'\n}\n\ntype ItemMap<C extends object, T> = { [P in keyof C]: T };\n\nexport const dark: ItemMap<typeof Color, string> = {\n    background: '#000',\n    text: '#fff',\n    accent: '#ef2c2c',\n    secondary: '#35363a',\n    accentText: '#fff',\n};\n\nexport const light: ItemMap<typeof Color, string> = {\n    background: '#fff',\n    text: '#000',\n    accent: '#ef2c2c',\n    secondary: '#b8babc',\n    accentText: '#fff',\n};\n\nexport const themes: ItemMap<typeof Theme, ItemMap<typeof Color, string>> = {\n    dark,\n    light,\n};\n\n\nexport function setTheme(theme: Theme) {\n    const html = document.getElementsByTagName('html')[0];\n    const keys = Object.keys(themes[theme]);\n\n    keys.forEach((key) => {\n        const color = (themes[theme] as any)[key];\n\n        html.style.setProperty(`--${key}`, color);\n    });\n}\n\nexport function initTheme(theme: Theme) {\n    const html = document.getElementsByTagName('html')[0];\n    html.style.transitionDuration = '0';\n\n    setTheme(theme);\n\n    html.style.transitionDuration = '0.7s';\n}\n","import {createDomain, sample} from 'effector';\nimport {withPersist} from 'src/common/effector-persist';\n\nimport {setTheme as setT, initTheme as initT, Theme} from 'src/ui/theme';\n\nconst ThemeDomain = createDomain('theme');\n\nexport const onInitTheme = ThemeDomain.event();\nexport const initTheme = ThemeDomain.effect<Theme, void>()\n    .use(theme => initT(theme));\nexport const setTheme = ThemeDomain.effect<Theme, Theme>()\n    .use(params => {\n        setT(params);\n        return params;\n    });\n\nexport const $theme = withPersist(ThemeDomain.store<Theme>(Theme.dark), {key: 'theme'})\n    .on(setTheme, (state, payload) => payload);\n\nsample({\n    clock: onInitTheme,\n    source: $theme,\n    target: initTheme,\n});\n\nonInitTheme();\n","import {createDomain, sample} from 'effector';\nimport {withPersist} from 'src/common/effector-persist';\n\nconst ZoomDomain = createDomain();\n\nexport const initZoom = ZoomDomain.event();\nexport const setZoom = ZoomDomain.effect<number, number>()\n    .use(size => {\n        const html = document.getElementsByTagName('html')[0];\n        html.style.fontSize = `${size}px`;\n\n        return size;\n    });\n\nexport const $zoom = withPersist(ZoomDomain.store<number>(16), {key: 'zoom'})\n    .on(setZoom.done, (state, {result}) => result);\n\nsample({\n    clock: initZoom,\n    source: $zoom,\n    target: setZoom,\n});\n\ninitZoom();\n","import React from 'react';\nimport styled from 'styled-components';\nimport {useStore} from \"effector-react\";\nimport {range} from 'lodash';\n\nimport {ThemeToggle} from \"src/ui\";\nimport {Theme} from \"src/ui/theme\";\nimport {$theme, setTheme} from \"src/features/header/theme.store\";\nimport {$zoom, setZoom} from 'src/features/header/zoom.store';\nimport {$absoluteGoalsPerWeek, setGoalsPerWeek} from 'src/features/goal-calendar/goals.store';\n\nconst HeaderWrapper = styled('header')`\n  position: fixed;\n  width: 100%;\n  left: 0;\n  top: -1px;\n  box-sizing: border-box;\n  z-index: 100;\n  \n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    background-color: var(--background);\n    z-index: 99;\n    opacity: .85;\n    transition: background-color .7s ease-in-out;\n    box-sizing: border-box;\n  }\n`;\n\nconst HeaderContainer = styled('div')`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  max-width: var(--max-container-width);\n  margin: 0 auto;\n  padding: 15px;\n  position: relative;\n  z-index: 100;\n`;\n\nconst ZoomContainer = styled('div')`\n  display: flex;\n  align-items: center;\n`;\n\nconst ZoomSVG = styled('svg')`\n  margin-right: 7px;\n  \n  path {\n    fill: var(--text);\n    transition: fill .7s ease-in-out;\n  }\n`;\n\nconst GoalsCountSelect = styled('select')`\n  margin-left: 20px;\n  font-size: 12px;\n`;\n\nexport const Header: React.FC = () => {\n    const theme = useStore($theme);\n    const zoom = useStore($zoom);\n    const absoluteGoalsPerWeek = useStore($absoluteGoalsPerWeek);\n\n    const handleChangeTheme = (value: boolean) => {\n        value ? setTheme(Theme.light) : setTheme(Theme.dark);\n    };\n\n    return (\n        <HeaderWrapper>\n            <HeaderContainer>\n                <ZoomContainer>\n                    <ZoomPlusIcon/>\n                    <input type=\"range\" min={5} max={30} value={zoom} onChange={e => setZoom(+e.target.value)}/>\n                    <GoalsCountSelect value={absoluteGoalsPerWeek} onChange={e => setGoalsPerWeek(+e.target.value)}>\n                        {range(1, 8).map(index => (\n                            <option value={index} key={index}>{index}</option>\n                        ))}\n                    </GoalsCountSelect>\n                </ZoomContainer>\n\n                <ThemeToggle\n                    id=\"theme\"\n                    value={theme === Theme.light}\n                    onChange={handleChangeTheme}\n                />\n            </HeaderContainer>\n        </HeaderWrapper>\n    )\n};\n\ninterface IconProps {\n    size?: number;\n}\n\nexport const ZoomPlusIcon: React.FC<IconProps > = ({size = 15}) => {\n    return (\n        <ZoomSVG xmlns=\"http://www.w3.org/2000/svg\" width={size} height={size} viewBox=\"0 0 192.9 192.9\">\n            <path\n                d=\"M190.7 180.1l-47.07-47.08a80.81 80.81 0 0 0 18.75-51.83C162.38 36.42 125.96 0 81.2 0 36.42 0 0 36.42 0 81.2c0 44.76 36.42 81.18 81.2 81.18a80.81 80.81 0 0 0 51.82-18.75l47.08 47.08a7.47 7.47 0 0 0 10.6 0 7.5 7.5 0 0 0 0-10.6zM15 81.2C15 44.7 44.7 15 81.2 15c36.49 0 66.18 29.7 66.18 66.2 0 36.49-29.7 66.18-66.19 66.18-36.5 0-66.19-29.7-66.19-66.19z\"/>\n        </ZoomSVG>\n    )\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport {GoalCalendar} from 'src/features/goal-calendar/goal-calendar';\nimport {Header} from 'src/features/header/header';\nimport {ModalContainer} from 'src/ui';\n\nconst AppContainer = styled('div')`\n  padding-top: 70px;\n  padding-bottom: 40px;\n  position: relative;\n  min-height: 100vh;\n  box-sizing: border-box;\n`;\n\nconst Footer = styled('footer')`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 35px;\n  font-size: 13px;\n  text-align: center;\n  padding-left: 15px;\n`;\n\nexport const App: React.FC = () => {\n    return (\n        <>\n            <AppContainer>\n                <Header/>\n                <GoalCalendar/>\n                <Footer>© 2020 Antsiferov Maxim</Footer>\n            </AppContainer>\n            <ModalContainer/>\n        </>\n    );\n};\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './app';\nimport './assets/reset.css';\nimport './assets/global.css'\nimport * as serviceWorker from './common/service-worker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}